(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-675cd169"],{"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),o=a("d8e8"),n=a("4bf8"),l=a("79e5"),r=[].sort,s=[1,2,3];i(i.P+i.F*(l((function(){s.sort(void 0)}))||!l((function(){s.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(n(this)):r.call(n(this),o(t))}})},a95c:function(t,e,a){"use strict";a.r(e);var i,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createPost-container"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"Lista",name:"lista"}},["lista"===t.activeTab?a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"Para alterar tamanho da fonte e a largura das colunas, clique em detalhe.",type:"success"}}),t._v(" "),a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Criar Lista")])]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Titulo"}},[a("el-input",{model:{value:t.form.titulo,callback:function(e){t.$set(t.form,"titulo",e)},expression:"form.titulo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Abertura"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.abertura,callback:function(e){t.$set(t.form,"abertura",e)},expression:"form.abertura"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Fechamento"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.fechamento,callback:function(e){t.$set(t.form,"fechamento",e)},expression:"form.fechamento"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Cabeçalho"}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-radio",{attrs:{label:"0",border:"",size:"mini"},model:{value:t.form.cabecalho,callback:function(e){t.$set(t.form,"cabecalho",e)},expression:"form.cabecalho"}},[t._v("Não")]),t._v(" "),a("el-radio",{attrs:{label:"1",border:"",size:"mini"},model:{value:t.form.cabecalho,callback:function(e){t.$set(t.form,"cabecalho",e)},expression:"form.cabecalho"}},[t._v("Sim")])],1)]),t._v(" "),t.id?a("el-form-item",{attrs:{label:"Colunas"}},[a("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{filterable:"",titles:["Lista","Colunas"],"button-texts":["Remover","Selecionar"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:t.data},on:{change:t.handleChange},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.option;return a("span",{},[t._v(t._s(i.key)+" - "+t._s(i.label))])}}],null,!1,1769247540),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e(),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createData()}}},[t._v("Criar")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.createNovo()}}},[t._v("Nova Lista")]),t._v(" "),t.id?a("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.exibirDeclaracao(t.id)}}},[t._v("Imprimir")]):t._e()],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"Data",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t._f("moment")(e.row.data,"DD/MM/YYYY")))])]}}],null,!1,2614948412)}),t._v(" "),a("el-table-column",{attrs:{label:"Titulo",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("Abertura: "+t._s(e.row.abertura))]),t._v(" "),a("p",[t._v("Fechamento: "+t._s(e.row.fechamento))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.titulo))])],1)])]}}],null,!1,1957857009)}),t._v(" "),a("el-table-column",{attrs:{label:"Operações"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row.id)}}},[t._v("Editar")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.exibirDeclaracao(e.row.id)}}},[t._v("Imprimir")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("Delete")])]}}],null,!1,694891647)})],1)],1):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Detalhes",name:"detalhe"}},["detalhe"===t.activeTab?a("linha",{attrs:{id:t.id},on:{recarregar:t.fetchDataListaLinha}}):t._e()],1)],1),t._v(" "),1==t.exibirBotao?a("baixar",{attrs:{titulo:"MediasDisciplinaAnual",html:t.html,link:t.link},on:{fechar:t.dialogFechar}}):t._e(),t._v(" "),a("el-dialog",{attrs:{width:"95%",title:"Imprimir Lista",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-school",plain:""},on:{click:function(e){return t.getDeclaracao(1,1)}}},[t._v("Escola")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:function(e){return t.getLista(2)}}},[t._v("Turno")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-s-grid",plain:""},on:{click:function(e){return t.getLista(3)}}},[t._v("Turma")]),t._v(" "),2===t.tipo?a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-radio-group",{staticStyle:{"padding-top":"30px"},attrs:{size:"small"},on:{change:function(e){return t.getDeclaracao(t.tipo,t.modelo)}},model:{value:t.modelo,callback:function(e){t.modelo=e},expression:"modelo"}},[a("el-radio",{attrs:{label:"1",border:""}},[t._v("Matutino")]),t._v(" "),a("el-radio",{attrs:{label:"2",border:""}},[t._v("Vespertino")]),t._v(" "),a("el-radio",{attrs:{label:"3",border:""}},[t._v("Noturno")])],1)],1)],1)],1):t._e(),t._v(" "),3===t.tipo?a("div",[a("el-radio-group",{staticStyle:{"padding-top":"30px"},attrs:{size:"small"},on:{change:function(e){return t.getDeclaracao(t.tipo,t.modelo)}},model:{value:t.modelo,callback:function(e){t.modelo=e},expression:"modelo"}},t._l(t.listMinhasTurma,(function(e,i){return a("el-radio",{key:i,attrs:{label:e.id,border:""}},[t._v(t._s(e.nome))])})),1)],1):t._e()],1),t._v(" "),t.modelo?a("div",["false"!==t.baixarPdf?a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"warning"},on:{click:function(e){return t.fetchDataListaHtml(t.html)}}},[t._v("PDF"),a("i",{staticClass:"el-icon-download el-icon-right"})]):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"danger"},on:{click:function(e){return t.getLink("H")}}},[t._v("PDF ABERTO HORIZONTAL"),a("i",{staticClass:"el-icon-position el-icon-right"})]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"warning"},on:{click:function(e){return t.getLink("V")}}},[t._v("PDF ABERTO VERTICAL"),a("i",{staticClass:"el-icon-position el-icon-right"})]),t._v(" "),"false"!==t.baixarWord?a("word",{staticStyle:{"margin-top":"5px"},attrs:{arquivo:t.titulo,htmlString:t.html}}):t._e(),t._v(" "),"false"!==t.baixarEditor?a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"success",icon:"el-icon-edit"},on:{click:t.editor}},[t._v("Editor")]):t._e()],1):t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("Cancelar")])],1)])],1)},n=[],l=(a("55dd"),a("96cf"),a("3b8d")),r=(a("b54a"),a("db72")),s=a("bd86"),c=a("beb4"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"Coluna",width:"450"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.label,callback:function(a){t.$set(e.row,"label",a)},expression:"scope.row.label"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Tamanho",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{type:"number"},model:{value:e.row.espaco,callback:function(a){t.$set(e.row,"espaco",a)},expression:"scope.row.espaco"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Fonte",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{type:"number"},model:{value:e.row.fonte,callback:function(a){t.$set(e.row,"fonte",a)},expression:"scope.row.fonte"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Operações"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("Editar")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1)],1)},d=[],f={props:{tableData:{type:Array,default:void 0},id:{type:String,default:void 0}},data:function(){return{}},created:function(){this.fetchDataListaLinha(this.id)},methods:{handleEdit:function(t,e){var a={id:e.id,coluna:e.label,espaco:e.espaco,fonte:e.fonte};Object(c["e"])(a),this.$notify({title:"Sucesso",message:"Alterado com sucesso",type:"success",duration:2e3}),this.$emit("recarregar",this.id)},handleDelete:function(t,e){var a=this;this.$confirm("Deseja apagar esta lista?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then((function(){Object(c["b"])(e.id).then((function(t){a.fetchDataListaLinha(a.id),a.$emit("recarregar",a.id),a.$message({type:"success",message:"Delete completo"})}))})).catch((function(){a.$message({type:"info",message:"Delete canceledo"})}))},fetchDataListaLinha:function(t){var e=this;Object(c["g"])(t).then((function(t){e.tableData=t.data})).catch((function(t){console.log(t)}))}}},h=f,m=a("2877"),p=Object(m["a"])(h,u,d,!1,null,null,null),b=p.exports,v=a("50ce"),y=a("8ad2"),g=a("ebe1"),_=a("ca72"),k=a("094c"),w=a("fc46"),x=a("8b25"),D=a("2f62"),S=a("44a2"),L=a("90ba"),O=a("6724"),$=a("e350"),j=Object(D["a"])("turma"),E=j.mapActions,T=j.mapGetters,C=Object(D["a"])("print"),A=C.mapActions,F=C.mapGetters,M={name:"TarefaResposta",directives:{waves:O["a"]},components:{linha:b,baixar:L["a"],tinymce:_["a"],FilenameOption:v["a"],word:k["a"],pdf:w["a"],AutoWidthOption:y["a"],BookTypeOption:g["a"]},props:(i={tableData:{type:Array,default:void 0},idPessoa:{type:String,default:void 0},id:{type:String,default:0},idLista:{type:String,default:0},tipo:{type:String,default:0},activeTab:{type:String,default:"lista"},baixarWord:{type:String,default:void 0},baixarPdf:{type:String,default:void 0},baixarEditor:{type:String,default:void 0},titulo:{type:String,default:void 0},modelo:{type:String,default:void 0},html:{type:String,default:void 0},link:{type:String,default:void 0},tituloExcel:{type:Array,default:void 0},cabecalho:{type:Array,default:void 0},observacao:{type:String,default:void 0},situacao:{type:String,default:void 0}},Object(s["a"])(i,"titulo",{type:String,default:void 0}),Object(s["a"])(i,"idDisciplina",{type:String,default:void 0}),i),data:function(){this.$createElement;return{data:[{key:1,label:"Nome Aluno",tamanho:"2"},{key:2,label:"Nascimento",tamanho:"2"},{key:3,label:"Mãe",tamanho:"2"},{key:4,label:"Pai",tamanho:"2"},{key:5,label:"Idade",tamanho:"2"},{key:6,label:"Sexo",tamanho:"2"},{key:7,label:"Cor/Raça",tamanho:"2"},{key:8,label:"Código",tamanho:"2"},{key:9,label:"Mátricula",tamanho:"2"},{key:10,label:"Turma",tamanho:"2"},{key:11,label:"Espaço",tamanho:"2"},{key:12,label:"Espaço",tamanho:"2"},{key:13,label:"Espaço",tamanho:"2"},{key:14,label:"Espaço",tamanho:"2"},{key:15,label:"Espaço",tamanho:"2"},{key:16,label:"Espaço",tamanho:"2"},{key:17,label:"Espaço",tamanho:"2"},{key:18,label:"Espaço",tamanho:"2"},{key:19,label:"Espaço",tamanho:"2"},{key:20,label:"Espaço",tamanho:"2"}],renderFunc:function(t,e){return t("span",[e.key," - ",e.label])},dialogFormVisible:!1,list:null,link:null,modelo:null,value:[],listQuery:{page:1,limit:20,importance:void 0,ano:void 0,type:void 0,order:"asc"},form:{id:this.id,abertura:"",fechamento:"",titulo:"",cabecalho:"0",coluna:[]}}},watch:{id:function(t){this.fetchMinhaLista(),t&&(this.form.id=t,this.$router.push("".concat(this.$route.path,"?id=").concat(t)))},modelo:function(){this.fetchDataHtml()},dialogFormVisible:function(t){!1===t&&(this.modelo="",this.$emit("fechar"))}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},T(["listMinhasTurma","totalMinhasTurma","listLoading"])),F(["listHtml","listLink"])),Object(D["c"])(["rede","token","idEscola"])),created:function(){Object(S["a"])(this.$store),this.listarMinhasTurma(this.listQuery);var t=this.$route.query.id;t&&(this.id=t),this.fetchMinhaLista(),this.id&&(this.fetchData(this.id),this.fetchDataListaLinha(this.id)),this.titulo="boletim_de_turma"},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},E(["listarMinhasTurma"])),{},{handleChange:function(t,e,a){if("right"===e){var i={lista:this.id,coluna:a};Object(c["a"])(i),this.$notify({title:"Sucesso",message:"Adicionado com sucesso",type:"success",duration:2e3})}else{i={lista:this.id,coluna:a};Object(c["d"])(i),this.$notify({title:"Sucesso",message:"Removido com sucesso",type:"success",duration:2e3})}},createNovo:function(){this.id=0,this.form={id:0,abertura:"",fechamento:"",titulo:"",cabecalho:"0",coluna:[]}},exibirDeclaracao:function(t){this.dialogFormVisible=!0,this.idLista=t},getLista:function(t){this.tipo="",this.tipo=t},getDeclaracao:function(t,e){var a=this;this.tipo=t,this.modelo=e,1===t&&(this.modelo=e),verificarBoletim_AlunoNotas(this.tipo,this.modelo).then((function(t){a.html=t.data})).catch((function(t){console.log(t)}))},getLink:function(t){var e="https://fontedeluz.mgestor.com/crud/api/lista/verificarLista_Aberta/"+this.tipo+"/"+this.modelo+"/"+this.id+"/"+t+"/"+this.token;window.open(e)},dialogFechar:function(t){this.exibirBotao=!1},fetchDataHtml:function(){var t=this;Object(c["v"])(this.tipo,this.modelo,this.id).then((function(e){t.html=e.data}))}},A(["listarHtml","listarLink","resetarPrint"])),{},{editor:function(){this.resetarPrint(),this.listarHtml(this.html),this.listarLink(this.link),this.$router.push("/print/impressoesEditar"),this.$emit("fechar")},fetchDataListaHtml:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,a={html:e},t.next=4,Object(x["v"])(a).then((function(t){i.link=t.link,i.isLoading=!1,i.downloadContract()}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),downloadContract:function(){var t=this;this.$http.get(this.link,{responseType:"arraybuffer"}).then((function(e){var a=new Blob([e.data],{type:"application/pdf"}),i=document.createElement("a");i.href=window.URL.createObjectURL(a),i.download=t.titulo+".pdf",i.click()}))},formatJson:function(t){return this.list.map((function(e){return t.map((function(t){return"timestamp"===t?parseTime(e[t]):e[t]}))}))},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"},checkPermission:$["a"],createData:function(){var t=this;Object(c["A"])(this.form).then((function(e){t.id=e.data,t.$emit("salvar"),t.$notify({title:"Sucesso",message:"Adicionado com sucesso",type:"success",duration:2e3})}))},fetchMinhaLista:function(){var t=this;Object(c["h"])().then((function(e){t.tableData=e.data})).catch((function(t){console.log(t)}))},handleDelete:function(t){var e=this;this.$confirm("Deseja apagar esta lista?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then((function(){Object(c["c"])(t).then((function(t){e.fetchMinhaLista(),e.$message({type:"success",message:"Delete completo"})}))})).catch((function(){e.$message({type:"info",message:"Delete canceledo"})}))},handleLinhaDelete:function(t){var e=this;Object(c["d"])(t).then((function(t){e.$notify({title:"Sucesso",message:"Apagado com sucesso",type:"success",duration:2e3})}))},handleEdit:function(t){this.fetchData(t),this.id=t},fetchData:function(t){var e=this;Object(c["f"])(t).then((function(t){e.form=t.data})).catch((function(t){console.log(t)}))},fetchDataListaLinha:function(t){var e=this;Object(c["g"])(t).then((function(t){e.value=t.lista})).catch((function(t){console.log(t)}))}})},P=M,R=Object(m["a"])(P,o,n,!1,null,null,null);e["default"]=R.exports}}]);